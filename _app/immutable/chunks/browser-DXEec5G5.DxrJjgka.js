function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{_ as w}from"./preload-helper.BQ24v_F8.js";import{g as E}from"./_commonjsHelpers.BosuxZz1.js";import{r as C}from"./utils-BcjXZ87z.SIoAe97T.js";import{v as L,f as N,S as H}from"./index.C-00tRQo.js";var F={exports:{}},B={exports:{}};(function(){var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d={rotl:function(u,c){return u<<c|u>>>32-c},rotr:function(u,c){return u<<32-c|u>>>c},endian:function(u){if(u.constructor==Number)return d.rotl(u,8)&16711935|d.rotl(u,24)&4278255360;for(var c=0;c<u.length;c++)u[c]=d.endian(u[c]);return u},randomBytes:function(u){for(var c=[];u>0;u--)c.push(Math.floor(Math.random()*256));return c},bytesToWords:function(u){for(var c=[],a=0,f=0;a<u.length;a++,f+=8)c[f>>>5]|=u[a]<<24-f%32;return c},wordsToBytes:function(u){for(var c=[],a=0;a<u.length*32;a+=8)c.push(u[a>>>5]>>>24-a%32&255);return c},bytesToHex:function(u){for(var c=[],a=0;a<u.length;a++)c.push((u[a]>>>4).toString(16)),c.push((u[a]&15).toString(16));return c.join("")},hexToBytes:function(u){for(var c=[],a=0;a<u.length;a+=2)c.push(parseInt(u.substr(a,2),16));return c},bytesToBase64:function(u){for(var c=[],a=0;a<u.length;a+=3)for(var f=u[a]<<16|u[a+1]<<8|u[a+2],s=0;s<4;s++)a*8+s*6<=u.length*8?c.push(l.charAt(f>>>6*(3-s)&63)):c.push("=");return c.join("")},base64ToBytes:function(u){u=u.replace(/[^A-Z0-9+\/]/ig,"");for(var c=[],a=0,f=0;a<u.length;f=++a%4)f!=0&&c.push((l.indexOf(u.charAt(a-1))&Math.pow(2,-2*f+8)-1)<<f*2|l.indexOf(u.charAt(a))>>>6-f*2);return c}};B.exports=d})();var I=B.exports,m={utf8:{stringToBytes:function(l){return m.bin.stringToBytes(unescape(encodeURIComponent(l)))},bytesToString:function(l){return decodeURIComponent(escape(m.bin.bytesToString(l)))}},bin:{stringToBytes:function(l){for(var d=[],u=0;u<l.length;u++)d.push(l.charCodeAt(u)&255);return d},bytesToString:function(l){for(var d=[],u=0;u<l.length;u++)d.push(String.fromCharCode(l[u]));return d.join("")}}},T=m;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var M=function(l){return l!=null&&(_(l)||P(l)||!!l._isBuffer)};function _(l){return!!l.constructor&&typeof l.constructor.isBuffer=="function"&&l.constructor.isBuffer(l)}function P(l){return typeof l.readFloatLE=="function"&&typeof l.slice=="function"&&_(l.slice(0,0))}(function(){var l=I,d=T.utf8,u=M,c=T.bin,a=function(f,s){f.constructor==String?s&&s.encoding==="binary"?f=c.stringToBytes(f):f=d.stringToBytes(f):u(f)?f=Array.prototype.slice.call(f,0):!Array.isArray(f)&&f.constructor!==Uint8Array&&(f=f.toString());for(var o=l.bytesToWords(f),p=f.length*8,n=1732584193,r=-271733879,e=-1732584194,t=271733878,i=0;i<o.length;i++)o[i]=(o[i]<<8|o[i]>>>24)&16711935|(o[i]<<24|o[i]>>>8)&4278255360;o[p>>>5]|=128<<p%32,o[(p+64>>>9<<4)+14]=p;for(var g=a._ff,h=a._gg,v=a._hh,y=a._ii,i=0;i<o.length;i+=16){var z=n,S=r,A=e,k=t;n=g(n,r,e,t,o[i+0],7,-680876936),t=g(t,n,r,e,o[i+1],12,-389564586),e=g(e,t,n,r,o[i+2],17,606105819),r=g(r,e,t,n,o[i+3],22,-1044525330),n=g(n,r,e,t,o[i+4],7,-176418897),t=g(t,n,r,e,o[i+5],12,1200080426),e=g(e,t,n,r,o[i+6],17,-1473231341),r=g(r,e,t,n,o[i+7],22,-45705983),n=g(n,r,e,t,o[i+8],7,1770035416),t=g(t,n,r,e,o[i+9],12,-1958414417),e=g(e,t,n,r,o[i+10],17,-42063),r=g(r,e,t,n,o[i+11],22,-1990404162),n=g(n,r,e,t,o[i+12],7,1804603682),t=g(t,n,r,e,o[i+13],12,-40341101),e=g(e,t,n,r,o[i+14],17,-1502002290),r=g(r,e,t,n,o[i+15],22,1236535329),n=h(n,r,e,t,o[i+1],5,-165796510),t=h(t,n,r,e,o[i+6],9,-1069501632),e=h(e,t,n,r,o[i+11],14,643717713),r=h(r,e,t,n,o[i+0],20,-373897302),n=h(n,r,e,t,o[i+5],5,-701558691),t=h(t,n,r,e,o[i+10],9,38016083),e=h(e,t,n,r,o[i+15],14,-660478335),r=h(r,e,t,n,o[i+4],20,-405537848),n=h(n,r,e,t,o[i+9],5,568446438),t=h(t,n,r,e,o[i+14],9,-1019803690),e=h(e,t,n,r,o[i+3],14,-187363961),r=h(r,e,t,n,o[i+8],20,1163531501),n=h(n,r,e,t,o[i+13],5,-1444681467),t=h(t,n,r,e,o[i+2],9,-51403784),e=h(e,t,n,r,o[i+7],14,1735328473),r=h(r,e,t,n,o[i+12],20,-1926607734),n=v(n,r,e,t,o[i+5],4,-378558),t=v(t,n,r,e,o[i+8],11,-2022574463),e=v(e,t,n,r,o[i+11],16,1839030562),r=v(r,e,t,n,o[i+14],23,-35309556),n=v(n,r,e,t,o[i+1],4,-1530992060),t=v(t,n,r,e,o[i+4],11,1272893353),e=v(e,t,n,r,o[i+7],16,-155497632),r=v(r,e,t,n,o[i+10],23,-1094730640),n=v(n,r,e,t,o[i+13],4,681279174),t=v(t,n,r,e,o[i+0],11,-358537222),e=v(e,t,n,r,o[i+3],16,-722521979),r=v(r,e,t,n,o[i+6],23,76029189),n=v(n,r,e,t,o[i+9],4,-640364487),t=v(t,n,r,e,o[i+12],11,-421815835),e=v(e,t,n,r,o[i+15],16,530742520),r=v(r,e,t,n,o[i+2],23,-995338651),n=y(n,r,e,t,o[i+0],6,-198630844),t=y(t,n,r,e,o[i+7],10,1126891415),e=y(e,t,n,r,o[i+14],15,-1416354905),r=y(r,e,t,n,o[i+5],21,-57434055),n=y(n,r,e,t,o[i+12],6,1700485571),t=y(t,n,r,e,o[i+3],10,-1894986606),e=y(e,t,n,r,o[i+10],15,-1051523),r=y(r,e,t,n,o[i+1],21,-2054922799),n=y(n,r,e,t,o[i+8],6,1873313359),t=y(t,n,r,e,o[i+15],10,-30611744),e=y(e,t,n,r,o[i+6],15,-1560198380),r=y(r,e,t,n,o[i+13],21,1309151649),n=y(n,r,e,t,o[i+4],6,-145523070),t=y(t,n,r,e,o[i+11],10,-1120210379),e=y(e,t,n,r,o[i+2],15,718787259),r=y(r,e,t,n,o[i+9],21,-343485551),n=n+z>>>0,r=r+S>>>0,e=e+A>>>0,t=t+k>>>0}return l.endian([n,r,e,t])};a._ff=function(f,s,o,p,n,r,e){var t=f+(s&o|~s&p)+(n>>>0)+e;return(t<<r|t>>>32-r)+s},a._gg=function(f,s,o,p,n,r,e){var t=f+(s&p|o&~p)+(n>>>0)+e;return(t<<r|t>>>32-r)+s},a._hh=function(f,s,o,p,n,r,e){var t=f+(s^o^p)+(n>>>0)+e;return(t<<r|t>>>32-r)+s},a._ii=function(f,s,o,p,n,r,e){var t=f+(o^(s|~p))+(n>>>0)+e;return(t<<r|t>>>32-r)+s},a._blocksize=16,a._digestsize=16,F.exports=function(f,s){if(f==null)throw new Error("Illegal argument "+f);var o=l.wordsToBytes(a(f,s));return s&&s.asBytes?o:s&&s.asString?c.bytesToString(o):l.bytesToHex(o)}})();var O=F.exports;const R=E(O);let x=0;const J=(l,d,u)=>L(l,(c,a,f)=>{if(c.type!=="element"||c.tagName!=="pre")return;const s=c.children.at(0);if(!s||s.tagName!=="code"||!s.properties.className||!s.properties.className.includes("language-tikz"))return;const o=C(s.children[0].value),p=document.createElement("div"),n=document.createElement("div"),r=document.createTextNode(o);p.classList.add("tikz-generated"),p.setAttribute("tikz-generation",x.toString()),((u==null?void 0:u.center)??!0)&&p.setAttribute("align","center"),u!=null&&u.class&&p.classList.add(...u.class.split(" ")),n.setAttribute("type","tikzjax"),u!=null&&u.debug&&n.setAttribute("data-show-console","true"),n.appendChild(r);const e=R(JSON.stringify(n.dataset)+r.nodeValue);let t=window.localStorage.getItem(e);t?(u!=null&&u.postProcessing&&(t=u.postProcessing(t)),p.innerHTML=t):p.appendChild(n),d.sanitizer&&(p.innerHTML=d.sanitizer(p.innerHTML));const i=N(p);return f==null||f.children.splice(a,1,i),[H,a]});function K(l,d){var u;const c=(u=l.detail.carta.renderer)==null?void 0:u.container;if(!c){console.error("Failed to process tikz code: cannot find renderer container element.");return}x++,D(c),U(d)}function D(l){Array.from(l.querySelectorAll(".tikz-generated[tikz-generation]")).filter(d=>Number(d.getAttribute("tikz-generation")??-1)<x).forEach(d=>d.remove())}async function U(l){if(window.tikzjax!=null)return;window.tikzjax=!0;const d=`<script type="text/javascript" id="tikzjax">${(await w(()=>import("./tikzjax-Bvw2IMTd.nWJfTN6Z.js"),__vite__mapDeps([]),import.meta.url)).default}<\/script>`,u=document.createRange();u.selectNode(document.getElementsByTagName("body")[0]);const c=u.createContextualFragment(d);document.body.appendChild(c),document.addEventListener("tikzjax-load-finished",a=>{const f=a.target;l!=null&&l.postProcessing&&(f.outerHTML=l.postProcessing(f.outerHTML))})}export{J as browserTikzTransform,K as processTikzScripts};
