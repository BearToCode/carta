import{_ as I}from"./C1FmrZbK.js";import{g as L}from"./BJIEjOlU.js";import{v as M,f as N,S as q}from"./CfhMMxMh.js";var m={exports:{}},x={exports:{}},_;function H(){return _||(_=1,function(){var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s={rotl:function(i,c){return i<<c|i>>>32-c},rotr:function(i,c){return i<<32-c|i>>>c},endian:function(i){if(i.constructor==Number)return s.rotl(i,8)&16711935|s.rotl(i,24)&4278255360;for(var c=0;c<i.length;c++)i[c]=s.endian(i[c]);return i},randomBytes:function(i){for(var c=[];i>0;i--)c.push(Math.floor(Math.random()*256));return c},bytesToWords:function(i){for(var c=[],a=0,f=0;a<i.length;a++,f+=8)c[f>>>5]|=i[a]<<24-f%32;return c},wordsToBytes:function(i){for(var c=[],a=0;a<i.length*32;a+=8)c.push(i[a>>>5]>>>24-a%32&255);return c},bytesToHex:function(i){for(var c=[],a=0;a<i.length;a++)c.push((i[a]>>>4).toString(16)),c.push((i[a]&15).toString(16));return c.join("")},hexToBytes:function(i){for(var c=[],a=0;a<i.length;a+=2)c.push(parseInt(i.substr(a,2),16));return c},bytesToBase64:function(i){for(var c=[],a=0;a<i.length;a+=3)for(var f=i[a]<<16|i[a+1]<<8|i[a+2],d=0;d<4;d++)a*8+d*6<=i.length*8?c.push(l.charAt(f>>>6*(3-d)&63)):c.push("=");return c.join("")},base64ToBytes:function(i){i=i.replace(/[^A-Z0-9+\/]/ig,"");for(var c=[],a=0,f=0;a<i.length;f=++a%4)f!=0&&c.push((l.indexOf(i.charAt(a-1))&Math.pow(2,-2*f+8)-1)<<f*2|l.indexOf(i.charAt(a))>>>6-f*2);return c}};x.exports=s}()),x.exports}var T,B;function z(){if(B)return T;B=1;var l={utf8:{stringToBytes:function(s){return l.bin.stringToBytes(unescape(encodeURIComponent(s)))},bytesToString:function(s){return decodeURIComponent(escape(l.bin.bytesToString(s)))}},bin:{stringToBytes:function(s){for(var i=[],c=0;c<s.length;c++)i.push(s.charCodeAt(c)&255);return i},bytesToString:function(s){for(var i=[],c=0;c<s.length;c++)i.push(String.fromCharCode(s[c]));return i.join("")}}};return T=l,T}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var F,A;function R(){if(A)return F;A=1,F=function(i){return i!=null&&(l(i)||s(i)||!!i._isBuffer)};function l(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function s(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&l(i.slice(0,0))}return F}var S;function P(){return S||(S=1,function(){var l=H(),s=z().utf8,i=R(),c=z().bin,a=function(f,d){f.constructor==String?d&&d.encoding==="binary"?f=c.stringToBytes(f):f=s.stringToBytes(f):i(f)?f=Array.prototype.slice.call(f,0):!Array.isArray(f)&&f.constructor!==Uint8Array&&(f=f.toString());for(var o=l.bytesToWords(f),y=f.length*8,r=1732584193,t=-271733879,n=-1732584194,e=271733878,u=0;u<o.length;u++)o[u]=(o[u]<<8|o[u]>>>24)&16711935|(o[u]<<24|o[u]>>>8)&4278255360;o[y>>>5]|=128<<y%32,o[(y+64>>>9<<4)+14]=y;for(var p=a._ff,g=a._gg,h=a._hh,v=a._ii,u=0;u<o.length;u+=16){var k=r,w=t,C=n,E=e;r=p(r,t,n,e,o[u+0],7,-680876936),e=p(e,r,t,n,o[u+1],12,-389564586),n=p(n,e,r,t,o[u+2],17,606105819),t=p(t,n,e,r,o[u+3],22,-1044525330),r=p(r,t,n,e,o[u+4],7,-176418897),e=p(e,r,t,n,o[u+5],12,1200080426),n=p(n,e,r,t,o[u+6],17,-1473231341),t=p(t,n,e,r,o[u+7],22,-45705983),r=p(r,t,n,e,o[u+8],7,1770035416),e=p(e,r,t,n,o[u+9],12,-1958414417),n=p(n,e,r,t,o[u+10],17,-42063),t=p(t,n,e,r,o[u+11],22,-1990404162),r=p(r,t,n,e,o[u+12],7,1804603682),e=p(e,r,t,n,o[u+13],12,-40341101),n=p(n,e,r,t,o[u+14],17,-1502002290),t=p(t,n,e,r,o[u+15],22,1236535329),r=g(r,t,n,e,o[u+1],5,-165796510),e=g(e,r,t,n,o[u+6],9,-1069501632),n=g(n,e,r,t,o[u+11],14,643717713),t=g(t,n,e,r,o[u+0],20,-373897302),r=g(r,t,n,e,o[u+5],5,-701558691),e=g(e,r,t,n,o[u+10],9,38016083),n=g(n,e,r,t,o[u+15],14,-660478335),t=g(t,n,e,r,o[u+4],20,-405537848),r=g(r,t,n,e,o[u+9],5,568446438),e=g(e,r,t,n,o[u+14],9,-1019803690),n=g(n,e,r,t,o[u+3],14,-187363961),t=g(t,n,e,r,o[u+8],20,1163531501),r=g(r,t,n,e,o[u+13],5,-1444681467),e=g(e,r,t,n,o[u+2],9,-51403784),n=g(n,e,r,t,o[u+7],14,1735328473),t=g(t,n,e,r,o[u+12],20,-1926607734),r=h(r,t,n,e,o[u+5],4,-378558),e=h(e,r,t,n,o[u+8],11,-2022574463),n=h(n,e,r,t,o[u+11],16,1839030562),t=h(t,n,e,r,o[u+14],23,-35309556),r=h(r,t,n,e,o[u+1],4,-1530992060),e=h(e,r,t,n,o[u+4],11,1272893353),n=h(n,e,r,t,o[u+7],16,-155497632),t=h(t,n,e,r,o[u+10],23,-1094730640),r=h(r,t,n,e,o[u+13],4,681279174),e=h(e,r,t,n,o[u+0],11,-358537222),n=h(n,e,r,t,o[u+3],16,-722521979),t=h(t,n,e,r,o[u+6],23,76029189),r=h(r,t,n,e,o[u+9],4,-640364487),e=h(e,r,t,n,o[u+12],11,-421815835),n=h(n,e,r,t,o[u+15],16,530742520),t=h(t,n,e,r,o[u+2],23,-995338651),r=v(r,t,n,e,o[u+0],6,-198630844),e=v(e,r,t,n,o[u+7],10,1126891415),n=v(n,e,r,t,o[u+14],15,-1416354905),t=v(t,n,e,r,o[u+5],21,-57434055),r=v(r,t,n,e,o[u+12],6,1700485571),e=v(e,r,t,n,o[u+3],10,-1894986606),n=v(n,e,r,t,o[u+10],15,-1051523),t=v(t,n,e,r,o[u+1],21,-2054922799),r=v(r,t,n,e,o[u+8],6,1873313359),e=v(e,r,t,n,o[u+15],10,-30611744),n=v(n,e,r,t,o[u+6],15,-1560198380),t=v(t,n,e,r,o[u+13],21,1309151649),r=v(r,t,n,e,o[u+4],6,-145523070),e=v(e,r,t,n,o[u+11],10,-1120210379),n=v(n,e,r,t,o[u+2],15,718787259),t=v(t,n,e,r,o[u+9],21,-343485551),r=r+k>>>0,t=t+w>>>0,n=n+C>>>0,e=e+E>>>0}return l.endian([r,t,n,e])};a._ff=function(f,d,o,y,r,t,n){var e=f+(d&o|~d&y)+(r>>>0)+n;return(e<<t|e>>>32-t)+d},a._gg=function(f,d,o,y,r,t,n){var e=f+(d&y|o&~y)+(r>>>0)+n;return(e<<t|e>>>32-t)+d},a._hh=function(f,d,o,y,r,t,n){var e=f+(d^o^y)+(r>>>0)+n;return(e<<t|e>>>32-t)+d},a._ii=function(f,d,o,y,r,t,n){var e=f+(o^(d|~y))+(r>>>0)+n;return(e<<t|e>>>32-t)+d},a._blocksize=16,a._digestsize=16,m.exports=function(f,d){if(f==null)throw new Error("Illegal argument "+f);var o=l.wordsToBytes(a(f,d));return d&&d.asBytes?o:d&&d.asString?c.bytesToString(o):l.bytesToHex(o)}}()),m.exports}var D=P();const O=L(D);function U(l){l=l.replaceAll("&nbsp;","");let s=l.split(`
`);return s=s.map(i=>i.trim()),s=s.filter(i=>i),s.join(`
`)}const J=(l,s,i)=>{const c=new Date().getTime();M(l,(a,f,d)=>{if(a.type!=="element"||a.tagName!=="pre")return;const o=a.children.at(0);if(!o||o.tagName!=="code"||!o.properties.className||!o.properties.className.includes("language-tikz"))return;const y=U(o.children[0].value),r=document.createElement("div"),t=document.createElement("div"),n=document.createTextNode(y);r.classList.add("tikz-generated"),r.setAttribute("tikz-generation",c.toString()),((i==null?void 0:i.center)??!0)&&r.setAttribute("align","center"),i!=null&&i.class&&r.classList.add(...i.class.split(" ")),t.setAttribute("type","tikzjax"),i!=null&&i.debug&&t.setAttribute("data-show-console","true"),t.appendChild(n);const e=O(JSON.stringify(t.dataset)+n.nodeValue);let u=window.localStorage.getItem(e);u?(i!=null&&i.postProcessing&&(u=i.postProcessing(u)),r.innerHTML=u):r.appendChild(t),s.sanitizer&&(r.innerHTML=s.sanitizer(r.innerHTML));const p=N(r);return d==null||d.children.splice(f,1,p),[q,f]})};function K(l,s){var i;const c=(i=l.detail.carta.renderer)==null?void 0:i.container;if(!c){console.error("Failed to process tikz code: cannot find renderer container element.");return}G(c),V(s)}function G(l){const s=l.querySelectorAll(".tikz-generated[tikz-generation]"),i=Array.from(s).map(a=>Number(a.getAttribute("tikz-generation")??-1)),c=Math.max(...i);l.querySelectorAll(".tikz-generated[tikz-generation]").forEach(a=>{Number(a.getAttribute("tikz-generation")??-1)<c&&a.remove()})}async function V(l){if(window.tikzjax!=null)return;window.tikzjax=!0;const s=`<script type="text/javascript" id="tikzjax">${(await I(async()=>{const{default:a}=await import("./nWJfTN6Z.js");return{default:a}},[],import.meta.url)).default}<\/script>`,i=document.createRange();i.selectNode(document.getElementsByTagName("body")[0]);const c=i.createContextualFragment(s);document.body.appendChild(c),document.addEventListener("tikzjax-load-finished",a=>{const f=a.target;l!=null&&l.postProcessing&&(f.outerHTML=l.postProcessing(f.outerHTML))})}export{J as browserTikzTransform,K as processTikzScripts};
