function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{_ as k}from"./preload-helper.BQ24v_F8.js";import{g as w}from"./_commonjsHelpers.Cpj98o6Y.js";import{v as E,f as L,S as N}from"./index.DburebNP.js";var T={exports:{}},F={exports:{}};(function(){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d={rotl:function(a,l){return a<<l|a>>>32-l},rotr:function(a,l){return a<<32-l|a>>>l},endian:function(a){if(a.constructor==Number)return d.rotl(a,8)&16711935|d.rotl(a,24)&4278255360;for(var l=0;l<a.length;l++)a[l]=d.endian(a[l]);return a},randomBytes:function(a){for(var l=[];a>0;a--)l.push(Math.floor(Math.random()*256));return l},bytesToWords:function(a){for(var l=[],u=0,f=0;u<a.length;u++,f+=8)l[f>>>5]|=a[u]<<24-f%32;return l},wordsToBytes:function(a){for(var l=[],u=0;u<a.length*32;u+=8)l.push(a[u>>>5]>>>24-u%32&255);return l},bytesToHex:function(a){for(var l=[],u=0;u<a.length;u++)l.push((a[u]>>>4).toString(16)),l.push((a[u]&15).toString(16));return l.join("")},hexToBytes:function(a){for(var l=[],u=0;u<a.length;u+=2)l.push(parseInt(a.substr(u,2),16));return l},bytesToBase64:function(a){for(var l=[],u=0;u<a.length;u+=3)for(var f=a[u]<<16|a[u+1]<<8|a[u+2],s=0;s<4;s++)u*8+s*6<=a.length*8?l.push(c.charAt(f>>>6*(3-s)&63)):l.push("=");return l.join("")},base64ToBytes:function(a){a=a.replace(/[^A-Z0-9+\/]/ig,"");for(var l=[],u=0,f=0;u<a.length;f=++u%4)f!=0&&l.push((c.indexOf(a.charAt(u-1))&Math.pow(2,-2*f+8)-1)<<f*2|c.indexOf(a.charAt(u))>>>6-f*2);return l}};F.exports=d})();var C=F.exports,m={utf8:{stringToBytes:function(c){return m.bin.stringToBytes(unescape(encodeURIComponent(c)))},bytesToString:function(c){return decodeURIComponent(escape(m.bin.bytesToString(c)))}},bin:{stringToBytes:function(c){for(var d=[],a=0;a<c.length;a++)d.push(c.charCodeAt(a)&255);return d},bytesToString:function(c){for(var d=[],a=0;a<c.length;a++)d.push(String.fromCharCode(c[a]));return d.join("")}}},x=m;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var H=function(c){return c!=null&&(z(c)||I(c)||!!c._isBuffer)};function z(c){return!!c.constructor&&typeof c.constructor.isBuffer=="function"&&c.constructor.isBuffer(c)}function I(c){return typeof c.readFloatLE=="function"&&typeof c.slice=="function"&&z(c.slice(0,0))}(function(){var c=C,d=x.utf8,a=H,l=x.bin,u=function(f,s){f.constructor==String?s&&s.encoding==="binary"?f=l.stringToBytes(f):f=d.stringToBytes(f):a(f)?f=Array.prototype.slice.call(f,0):!Array.isArray(f)&&f.constructor!==Uint8Array&&(f=f.toString());for(var o=c.bytesToWords(f),y=f.length*8,t=1732584193,r=-271733879,e=-1732584194,n=271733878,i=0;i<o.length;i++)o[i]=(o[i]<<8|o[i]>>>24)&16711935|(o[i]<<24|o[i]>>>8)&4278255360;o[y>>>5]|=128<<y%32,o[(y+64>>>9<<4)+14]=y;for(var p=u._ff,g=u._gg,h=u._hh,v=u._ii,i=0;i<o.length;i+=16){var A=t,B=r,_=e,S=n;t=p(t,r,e,n,o[i+0],7,-680876936),n=p(n,t,r,e,o[i+1],12,-389564586),e=p(e,n,t,r,o[i+2],17,606105819),r=p(r,e,n,t,o[i+3],22,-1044525330),t=p(t,r,e,n,o[i+4],7,-176418897),n=p(n,t,r,e,o[i+5],12,1200080426),e=p(e,n,t,r,o[i+6],17,-1473231341),r=p(r,e,n,t,o[i+7],22,-45705983),t=p(t,r,e,n,o[i+8],7,1770035416),n=p(n,t,r,e,o[i+9],12,-1958414417),e=p(e,n,t,r,o[i+10],17,-42063),r=p(r,e,n,t,o[i+11],22,-1990404162),t=p(t,r,e,n,o[i+12],7,1804603682),n=p(n,t,r,e,o[i+13],12,-40341101),e=p(e,n,t,r,o[i+14],17,-1502002290),r=p(r,e,n,t,o[i+15],22,1236535329),t=g(t,r,e,n,o[i+1],5,-165796510),n=g(n,t,r,e,o[i+6],9,-1069501632),e=g(e,n,t,r,o[i+11],14,643717713),r=g(r,e,n,t,o[i+0],20,-373897302),t=g(t,r,e,n,o[i+5],5,-701558691),n=g(n,t,r,e,o[i+10],9,38016083),e=g(e,n,t,r,o[i+15],14,-660478335),r=g(r,e,n,t,o[i+4],20,-405537848),t=g(t,r,e,n,o[i+9],5,568446438),n=g(n,t,r,e,o[i+14],9,-1019803690),e=g(e,n,t,r,o[i+3],14,-187363961),r=g(r,e,n,t,o[i+8],20,1163531501),t=g(t,r,e,n,o[i+13],5,-1444681467),n=g(n,t,r,e,o[i+2],9,-51403784),e=g(e,n,t,r,o[i+7],14,1735328473),r=g(r,e,n,t,o[i+12],20,-1926607734),t=h(t,r,e,n,o[i+5],4,-378558),n=h(n,t,r,e,o[i+8],11,-2022574463),e=h(e,n,t,r,o[i+11],16,1839030562),r=h(r,e,n,t,o[i+14],23,-35309556),t=h(t,r,e,n,o[i+1],4,-1530992060),n=h(n,t,r,e,o[i+4],11,1272893353),e=h(e,n,t,r,o[i+7],16,-155497632),r=h(r,e,n,t,o[i+10],23,-1094730640),t=h(t,r,e,n,o[i+13],4,681279174),n=h(n,t,r,e,o[i+0],11,-358537222),e=h(e,n,t,r,o[i+3],16,-722521979),r=h(r,e,n,t,o[i+6],23,76029189),t=h(t,r,e,n,o[i+9],4,-640364487),n=h(n,t,r,e,o[i+12],11,-421815835),e=h(e,n,t,r,o[i+15],16,530742520),r=h(r,e,n,t,o[i+2],23,-995338651),t=v(t,r,e,n,o[i+0],6,-198630844),n=v(n,t,r,e,o[i+7],10,1126891415),e=v(e,n,t,r,o[i+14],15,-1416354905),r=v(r,e,n,t,o[i+5],21,-57434055),t=v(t,r,e,n,o[i+12],6,1700485571),n=v(n,t,r,e,o[i+3],10,-1894986606),e=v(e,n,t,r,o[i+10],15,-1051523),r=v(r,e,n,t,o[i+1],21,-2054922799),t=v(t,r,e,n,o[i+8],6,1873313359),n=v(n,t,r,e,o[i+15],10,-30611744),e=v(e,n,t,r,o[i+6],15,-1560198380),r=v(r,e,n,t,o[i+13],21,1309151649),t=v(t,r,e,n,o[i+4],6,-145523070),n=v(n,t,r,e,o[i+11],10,-1120210379),e=v(e,n,t,r,o[i+2],15,718787259),r=v(r,e,n,t,o[i+9],21,-343485551),t=t+A>>>0,r=r+B>>>0,e=e+_>>>0,n=n+S>>>0}return c.endian([t,r,e,n])};u._ff=function(f,s,o,y,t,r,e){var n=f+(s&o|~s&y)+(t>>>0)+e;return(n<<r|n>>>32-r)+s},u._gg=function(f,s,o,y,t,r,e){var n=f+(s&y|o&~y)+(t>>>0)+e;return(n<<r|n>>>32-r)+s},u._hh=function(f,s,o,y,t,r,e){var n=f+(s^o^y)+(t>>>0)+e;return(n<<r|n>>>32-r)+s},u._ii=function(f,s,o,y,t,r,e){var n=f+(o^(s|~y))+(t>>>0)+e;return(n<<r|n>>>32-r)+s},u._blocksize=16,u._digestsize=16,T.exports=function(f,s){if(f==null)throw new Error("Illegal argument "+f);var o=c.wordsToBytes(u(f,s));return s&&s.asBytes?o:s&&s.asString?l.bytesToString(o):c.bytesToHex(o)}})();var M=T.exports;const P=w(M);function D(c){c=c.replaceAll("&nbsp;","");let d=c.split(`
`);return d=d.map(a=>a.trim()),d=d.filter(a=>a),d.join(`
`)}const V=(c,d,a)=>{const l=new Date().getTime();E(c,(u,f,s)=>{if(u.type!=="element"||u.tagName!=="pre")return;const o=u.children.at(0);if(!o||o.tagName!=="code"||!o.properties.className||!o.properties.className.includes("language-tikz"))return;const y=D(o.children[0].value),t=document.createElement("div"),r=document.createElement("div"),e=document.createTextNode(y);t.classList.add("tikz-generated"),t.setAttribute("tikz-generation",l.toString()),((a==null?void 0:a.center)??!0)&&t.setAttribute("align","center"),a!=null&&a.class&&t.classList.add(...a.class.split(" ")),r.setAttribute("type","tikzjax"),a!=null&&a.debug&&r.setAttribute("data-show-console","true"),r.appendChild(e);const n=P(JSON.stringify(r.dataset)+e.nodeValue);let i=window.localStorage.getItem(n);i?(a!=null&&a.postProcessing&&(i=a.postProcessing(i)),t.innerHTML=i):t.appendChild(r),d.sanitizer&&(t.innerHTML=d.sanitizer(t.innerHTML));const p=L(t);return s==null||s.children.splice(f,1,p),[N,f]})};function W(c,d){var a;const l=(a=c.detail.carta.renderer)==null?void 0:a.container;if(!l){console.error("Failed to process tikz code: cannot find renderer container element.");return}O(l),R(d)}function O(c){const d=c.querySelectorAll(".tikz-generated[tikz-generation]"),a=Array.from(d).map(u=>Number(u.getAttribute("tikz-generation")??-1)),l=Math.max(...a);c.querySelectorAll(".tikz-generated[tikz-generation]").forEach(u=>{Number(u.getAttribute("tikz-generation")??-1)<l&&u.remove()})}async function R(c){if(window.tikzjax!=null)return;window.tikzjax=!0;const d=`<script type="text/javascript" id="tikzjax">${(await k(()=>import("./tikzjax-Bvw2IMTd.nWJfTN6Z.js"),__vite__mapDeps([]),import.meta.url)).default}<\/script>`,a=document.createRange();a.selectNode(document.getElementsByTagName("body")[0]);const l=a.createContextualFragment(d);document.body.appendChild(l),document.addEventListener("tikzjax-load-finished",u=>{const f=u.target;c!=null&&c.postProcessing&&(f.outerHTML=c.postProcessing(f.outerHTML))})}export{V as browserTikzTransform,W as processTikzScripts};
